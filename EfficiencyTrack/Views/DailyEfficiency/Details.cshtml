@model EfficiencyTrack.ViewModels.DailyEfficiencyViewModels.DailyDetailEfficiencyViewModel

@{
    ViewData["Title"] = "Детайли за дневна ефективност";
}

<main class="max-w-5xl mx-auto px-4 py-8">
    <header class="mb-6">
        <h1 class="text-3xl font-bold text-gray-800">@ViewData["Title"]</h1>
    </header>

    <section aria-label="Обща информация" class="mb-6">
        <div class="border rounded-lg p-4 bg-light shadow-sm">
            <dl class="row mb-0">
                <dt class="col-sm-4 fw-semibold">@Html.DisplayNameFor(m => m.Date)</dt>
                <dd class="col-sm-8">@Model.Date.ToString("dd.MM.yyyy")</dd>

                <dt class="col-sm-4 fw-semibold">@Html.DisplayNameFor(m => m.EmployeeCode)</dt>
                <dd class="col-sm-8">@Model.EmployeeCode</dd>

                <dt class="col-sm-4 fw-semibold">@Html.DisplayNameFor(m => m.EmployeeFullName)</dt>
                <dd class="col-sm-8">@Model.EmployeeFullName</dd>

                <dt class="col-sm-4 fw-semibold">@Html.DisplayNameFor(m => m.TotalWorkedMinutes)</dt>
                <dd class="col-sm-8">@Model.TotalWorkedMinutes</dd>

                <dt class="col-sm-4 fw-semibold">@Html.DisplayNameFor(m => m.TotalNeededMinutes)</dt>
                <dd class="col-sm-8">@Model.TotalNeededMinutes</dd>

                <dt class="col-sm-4 fw-semibold">@Html.DisplayNameFor(m => m.ShiftName)</dt>
                <dd class="col-sm-8">@Model.ShiftName</dd>

                <dt class="col-sm-4 fw-semibold">@Html.DisplayNameFor(m => m.EfficiencyPercentage)</dt>
                <dd class="col-sm-8">@Model.EfficiencyPercentage.ToString("F2") %</dd>
            </dl>
        </div>
    </section>

    <section aria-label="Детайли на операциите">
        <h2 class="h5 fw-bold mb-3">@Html.DisplayNameFor(m => m.DetailEntries)</h2>

        @if (Model.DetailEntries.Any())
        {
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-hover text-sm">
                    <thead class="table-light">
                        <tr>
                            <th>Дата</th>
                            <th>Рутинг</th>
                            <th>Бройки</th>
                            <th>Време за операция (мин)</th>
                            <th>Ефективност (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var entry in Model.DetailEntries)
                        {
                            <tr>
                                <td>@entry.Date.ToString("dd.MM.yyyy")</td>
                                <td>@entry.RoutingName</td>
                                <td>@entry.Pieces</td>
                                <td>@entry.WorkedMinutes.ToString("F2")</td>
                                <td>@entry.EfficiencyForOperation.ToString("F2")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="alert alert-info">Няма детайли за операции.</div>
        }
    </section>

    <nav class="mt-4">
        <a asp-action="Index" class="btn btn-secondary d-inline-flex align-items-center gap-1">
            <i class="bi bi-arrow-left-circle"></i> Назад към списъка
        </a>
    </nav>
</main>
